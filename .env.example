# =============================================================
# TenAsia Intelligence Hub — 환경 변수 예시
#
# 사용법:
#   cp .env.example .env
#   # .env 파일에 실제 값 입력 후 저장
#   # .env 는 .gitignore 에 포함됨 — 절대 커밋하지 말 것
# =============================================================


# ── 앱 환경 ───────────────────────────────────────────────────
# development | production
ENVIRONMENT=development

# ── AWS 기본 설정 ─────────────────────────────────────────────
AWS_REGION=ap-northeast-2
S3_BUCKET_NAME=tenasia-thumbnails

# EC2 Scraper 인스턴스 ID (Terraform output 후 입력)
# EC2_SCRAPER_INSTANCE_ID=i-0123456789abcdef0


# ── AI API 키 ─────────────────────────────────────────────────
# Google Gemini API 키
# 발급: https://aistudio.google.com/apikey
GEMINI_API_KEY=

# Gemini 분당 요청 제한 (무료: 15, 유료: 2000, 기본: 60)
GEMINI_RPM_LIMIT=60

# 사용 모델 (기본: gemini-2.0-flash)
# GEMINI_MODEL=gemini-2.0-flash


# ── 데이터베이스 접속 정보 ────────────────────────────────────
# 로컬 개발: PostgreSQL 직접 연결
DATABASE_URL=postgresql://tih_admin:password@localhost:5432/tih

# 로컬 SSM 터널 사용 시 (포트 포워딩 후):
# DATABASE_URL=postgresql://tih_admin:password@localhost:15432/tih

# DB 세부 설정 (선택 — 기본값 사용 권장)
# DB_POOL_SIZE=5
# DB_MAX_OVERFLOW=10
# DB_POOL_RECYCLE=1800


# ── 로깅 ──────────────────────────────────────────────────────
# DEBUG | INFO | WARNING | ERROR
LOG_LEVEL=INFO

# 로그 저장 디렉터리 (기본: ./logs)
# LOG_DIR=logs

# JSON 로그 형식 강제 (기본: 프로덕션이면 자동 활성화)
# JSON_LOGS=false


# ── FastAPI 내부 API ──────────────────────────────────────────
# App Runner 컨테이너 내부 포트 (변경 불필요)
FASTAPI_INTERNAL_PORT=8000


# ── 스크래퍼 설정 ─────────────────────────────────────────────
# 작업 큐 폴링 간격 (초)
WORKER_POLL_INTERVAL=10

# 워커 식별자 (미설정 시 EC2 인스턴스 ID 자동 감지)
# WORKER_ID=local-dev-01


# ── SSM Kill Switch (프로덕션 전용) ──────────────────────────
# 아래 값은 Terraform 이 자동 생성 — 수동 변경 불필요
# GEMINI_KILL_SWITCH_SSM=/tih/gemini/kill_switch
# GEMINI_MONTHLY_TOKENS_SSM=/tih/gemini/monthly_tokens
# GEMINI_MONTHLY_TOKEN_LIMIT=2000000
